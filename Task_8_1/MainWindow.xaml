<Window x:Class="Task_8_1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Task_8_1"
        Title="MainWindow" Height="400" Width="350">

    <Window.Resources>

        <DataTemplate x:Key="ProductDataTemplate">
            <Border x:Name="border"
                    Padding="10"
                    CornerRadius="10"
                    BorderThickness="1"
                    Background="#E4FAD0">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Image Grid.RowSpan="2"
                           Width="80" Height="80"
                           Margin="0,0,10,0"
                           Source="{Binding ImagePath}"/>

                    <TextBlock Grid.Column="1" Grid.Row="0"
                               Text="{Binding Name}"
                               FontWeight="Bold"
                               Margin="0,0,0,5"/>

                    <TextBlock Grid.Column="1" Grid.Row="1">
                        <Run Text="{Binding Price, StringFormat={}{0:N2}, ConverterCulture=ru-RU}"/>
                        <Run Text=" ₽"/>
                    </TextBlock>
                </Grid>
            </Border>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Category}">
                    <DataTrigger.Value>
                        <local:ProductCategory>Appliances</local:ProductCategory>
                    </DataTrigger.Value>
                    <Setter TargetName="border"
                            Property="Background"
                            Value="#D5E9FF"/>
                </DataTrigger>
            </DataTemplate.Triggers>

        </DataTemplate>

    </Window.Resources>

    <StackPanel>

        <ListBox ItemsSource="{Binding Products}"
                 ItemTemplate="{StaticResource ProductDataTemplate}"
                 Margin="10"
                 HorizontalContentAlignment="Stretch"/>
    </StackPanel>
</Window>
